# on-suke | オンスケ　-予定管理アプリ-

※本番運用中のURL：https://on-suke.vercel.app/

## 起動手順
本リポジトリをクローン後、envに環境変数を記述し、下記のコマンドを実行する

```
pnpm i
pnpm dev
```

※nodeはv22.11.0, pnpmは9.15.4

## アプリの説明
※PCのみ対応
予定の登録、編集、削除といった基本的な予定表機能に加え、カレンダーで予定を確認できる機能や、予定に対してタスクが登録できたり、予定のカテゴリを登録できたりするアプリ。
LINEアカウントと連携することで、毎日18時ごろに明日の予定がLINEのon-sukeアカウントから通知される。

## 開発秘話
スピーディに開発することを意識し、主要機能に関しては大体8人日程度で要件定義から実装まで終わった。
v0を活用したため、デザイン、スタイリングはほとんどAIに任せ、自身はシステム部分の開発に専念した。

### 当該アプリケーションの開発目的
- 最近のNext.jsを理解したかった

RSCやintercepting/parallel routes、PPRといった新目の機能をふんだんに盛り込んだ実装となっている。
PPRは特に良かったと思う。当初PPRというワードだけを知っており、どういう機能なのか不明であったが、Dynamic Rendering, Static Rendering, SSR Streamingのモデルについては理解しつつ、「こうなればいいのにな」と考えていたところPPRがまさしくそのニーズ通りのモデルであるとわかり感動した。
intercepting/paralell routesは若干バグらしき点があり、困った。例えば、ルートのファイルを移動した際、HMRでも反映して欲しいところだが、反映されず、一度開発サーバーを落として再実行しないと反映されないというバグがあった。
RSCに関しては制作物でちゃんと使うのは初めてであったが、今まで様々な記事やポッドキャストなどで情報をインプットしまくっており、いわゆる「エアプ」状態であったにも関わらず、あまり詰まることなくスムーズに理解、実装できて面白かった（あくまでも浅い使い方のみだが）。

- 予定の確認が漏れてしまうことがあり、改善したかった

過去の経験から、自分の欠陥を改善すべく当該アプリの制作に至った。
LINEなどの普段もよくみる媒体を通して予定をリマインドしたいという根底の要件から、機能開発を行なった。

## 主要選定技術と意見

**アプリケーション**
- React：Next.jsのApp Routerを試したかったためReactを選定。

- Next.js(App Router)：Next.jsのApp Routerを試したかったためReactを選定。

- Conform：サーバーアクションに対応しているのがこれだけっぽいのと、単純に以前使った際に体験が良かったため選定。

- zod：バリデーションに使用。軽量のvalibotも考えられたが、一旦zodに慣れたかったという理由で選定。

- TailwindCSS：本アプリ開発ではv0を活用しており、そのv0と相性が良かったため選定。

- ShadcnUI：本アプリ開発ではv0を活用しており、そのv0と相性が良かったため選定。 
余談だが、base UIがでてきたのでradixからちゃんと移行されるのか心配。

- Prisma：TypedSQLという機能が追加され最近勢いもあったので選定。
ただ、正直この選定は若干しくじったような気がする。理由は次のAccelerateに通ずる。

- Prisma Accelerate：PrismaはTCP接続ベースのORMライブラリだが、VercelのEdge FunctionでDBにアクセスしたく、それを実現するにはHTTPで接続できるPrisma Accelerateが必要だったため導入。 
ただ、DrizzleORMは普通にエッジで動くらしく、ちょっと後悔した。

**インフラ**
- Prisma Postgres：エッジからの接続を可能とするPostgresのDBかつ、現状日本リージョンがあるのはこのサービスだであるため選定。ただ、超新進気鋭なので普通にsupabaseとかのほうが安心できる。

- Vercel：Next.js使うならVercelが最適だろうということで選定。CronもVercel Cron Jobsを使ってる。

**開発環境**
- Biome.js：とにかく早くていい。React Hooksにおける依存配列のクイックフィックス機能がないことが懸念だったが、React Compilerを使っていればメモ化も基本しないし、useEffectに限ってはめったに使わないからこれからはBiomeでいいと思う。Denoが流行ればDenoのビルトインリンターもあるかも。。。？

- React Compiler：まだベータとはいえ、導入するメリットのほうがでかいと感じるため採用。もうプロダクトでも使っていいとは思ってる。

- Turbopack：どんなものか試したかったため選定。個人的にはViteの方が開発体験はいいと感じた。余談だがRollDownが非常に楽しみである。

## まだ改善が見込める点・未実装機能
- SlackやDiscordとも連携できるようにしたい。
- できれば予定が始まる10分前にも通知したい（が、Cronはホビープランだと1日1回なのでCronの根底を変えないと無理そう）
- タスク一覧画面を別途作りたい。
- タスクに対するタイムライン機能を実装したい（進捗管理やメモなどを行うための機能）
- レスポンシブ対応したい。ただこれやるならReactNativeとExpoの素振りがてらモバイルアプリ化したい。
- 予定表の絞り込み機能を充実させたい（カテゴリによる絞り込み、日付の絞り込み等）
- DynamicIOを導入し、キャッシュを活用してパフォーマンスを上げたい。
