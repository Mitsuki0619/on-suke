# on-suke | オンスケ　-予定管理アプリ-

※実際に運用中のURL：https://on-suke.vercel.app/

## 起動手順
本リポジトリをクローン後、envに環境変数を記述し、下記のコマンドを実行する

```
pnpm i
pnpm dev
```

※nodeはv22.11.0, pnpmは9.15.4

## アプリの説明
予定の登録、編集、削除といった基本的な予定表機能に加え、カレンダーで確認できる機能や、予定に対してタスクが登録できたり、予定のカテゴリを登録できたりするアプリ。
LINEアカウントと連携することで、毎日18時ごろに明日の予定がLINEのon-sukeアカウントから通知される。

## 主要選定技術と意見

**アプリケーション**
- React：特に言うことはない。SvelteとかVue使うなら安定のReactを使う。

- Next.js(App Router)：このアプリを作った根本的な理由がNext.jsのApp Routerを素振りしたいからである。したがって確定選定。DynamicIOも使いたかったが、Intercepting Routesを使ってみたく、現状併用するとビルドが落ちるらしいので断念。またいつか使いたい。

- Conform：サーバーアクションに対応しているのがこれだけっぽいのと、単純に以前使った際に体験が良かったため選定。React Hook Formが個人的にはあまり好きでないことからもConformは今後も使っていきたい。

- zod：バリデーションに使用。軽量のvalibotも考えられたがまだzodが安牌な気がしたため選定。

- TailwindCSS：正直プロダクトではCSS Modulesを素直に使いたいが、これは個人開発なので気楽にスタイリングできるTailwindを選定。プロダクトで使うなら気楽さではなくデザインシステムの利点を最大限に活用する使い方をしたい。

- ShadcnUI：これも個人開発であまりスタイリングに時間を割きたくなかったため選定。とはいえかなり開発者体験はいいと感じた。余談だが、base UIがでてきたのでradixからちゃんと移行されるのか心配。

- Prisma：正直この選定は若干しくじったような気がする。理由は次のAccelerateに通ずる。

- Prisma Accelerate：PrismaはTCP接続ベースのORMライブラリだが、VercelのEdge FunctionでDBにアクセスしたかったため、その場合TCPではなくHTTPベースとなり、それを実現するにはPrisma Accelerateが必要だったため導入。ただ、DrizzleORMは最初からエッジで動くらしく、Drizzleにしたらよかったとちょっと後悔した。とはいえ明らかにPrismaのほうが慣れている。

**インフラ**
- Prisma Postgres：エッジからの接続を可能とするPostgresのDBかつ、現状日本リージョンがあるのはこのサービスだであるため選定。ただ、超新進気鋭なので普通にsupabaseとかのほうが安心できる。
- Vercel：Next.js使うならVercelが最適だろうということで選定。CronもVercel Cron Jobsを使ってる。

**開発環境**
- Biome.js：とにかく早くていい。懸念だった依存配列のクイックフィックス機能だが、もうReact Compilerを使うためメモ化もしないし、useEffectなんてめったに使わないからこれからはBiomeでいいと思う。いや、Denoが流行ればDenoのビルトインリンターもあるかも。。。？
- React Compiler：まだベータとはいえ、導入するメリットのほうがでかいと感じるため採用。もうプロダクトでも使っていいとは思ってる。
- Turbopack：試したかっただけ。esmっていうのもあるだろうけどviteのほうがhmrが圧倒的に早そう。RollDownがかなり楽しみ。

## まだ改善が見込める点・未実装機能
- SlackやDiscordとも連携できるようにしたい。
- できれば予定が始まる10分前にも通知したい（が、Cronはホビープランだと1日1回なのでCronの根底を変えないと無理そう）
- タスク一覧画面を別途作りたい。
- レスポンシブ対応したい。ただこれやるならReactNativeとExpoの素振りがてらアプリ化したい。
- 予定表の絞り込み条件充実させる（カテゴリ選択、日付プルダウン等）
- DynamicIOを導入し、キャッシュを活用してパフォーマンスを上げたい。
- intercepting routesバグが多いのでやめたさがある
- 処理が遅いのでEdge FunctionのCPUグレード上げたい（無料じゃ無理）

